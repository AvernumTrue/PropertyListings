<div class="container">
  <h1 class="text-center">My Adverts</h1>
</div>

<div *ngFor="let advert of adverts">
  <div class="card container jumbotron">

    <div class="row">
      <div class="col">
        <div
          role="alert">
          <div *ngIf="advert.advertStatus === 'LIVE'"
            class="alert alert-success">
            <h4 class="text-center">Status: {{advert.advertStatus}}</h4>
          </div>
          <div *ngIf="advert.advertStatus === 'HIDDEN'"
            class="alert alert-danger"
            role="alert">
            <h4 class="text-center">Status: {{advert.advertStatus}}</h4>
          </div>
        </div>

      </div>
      <div class="col col-lg-8">
      </div>

      <div class="col col-lg-2 d-flex flex-row-reverse">
        <div class="justify-content-right">
          <button
            *ngIf="advert.id === selectedAdvert"
            type="button"
            class="btn btn-primary"
            (click)="showActions(0)"
            [disabled]="disableAction">
            Cancel
          </button>

          <button
            *ngIf="advert.id !== selectedAdvert"
            type="button"
            class="btn btn-primary"
            (click)="showActions(advert.id)"
            [disabled]="disableAction">
            Actions
          </button>

          <div *ngIf="advert.id === selectedAdvert">

            <div *ngIf="!busyDeleting">
              <button
                type="button"
                class="btn btn-primary"
                [routerLink]="['/create-advert', advert.id]"
                [disabled]="disableButtons">
                Edit Advert
              </button>
              <button
                *ngIf="advert.advertStatus === 'LIVE'"
                (click)="changeAdvertStatus(advert,'hide')"
                type="button"
                class="btn btn-primary"
                [disabled]="disableButtons">
                Hide Advert
              </button>
              <button
                *ngIf="advert.advertStatus === 'HIDDEN'"
                (click)="changeAdvertStatus(advert,'show')"
                type="button"
                class="btn btn-primary"
                [disabled]="disableButtons">
                Show Advert
              </button>
            </div>

            <button
              *ngIf="!busyDeleting"
              (click)="deleteAdvert()"
              type="button"
              class="btn btn-danger"
              [disabled]="disableButtons">
              Delete Advert
            </button>

            <div *ngIf="busyDeleting"
              class="alert alert-danger"
              role="alert">
              {{dangerMessage}}
              <button
                (click)="deleteConfirmed(advert.id)"
                type="button"
                class="btn btn-danger"
                [disabled]="disableButtons">
                Yes, delete it
              </button>
              <button
                (click)="cancel()"
                type="button"
                class="btn btn-success"
                [disabled]="disableButtons">
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="col col-lg-2">
      </div>
    </div>

    <h1 class="display-4">{{advert.headline}}</h1>
    <p class="card-text">{{advert.details}}</p>

    <ul class="list-group list-group-flush">
      <li class="list-group-item">Province: {{advert.province}}</li>
      <li class="list-group-item">City: {{advert.city}}</li>
      <li class="list-group-item">Price: R{{advert.price}}</li>
    </ul>
  </div>
</div>

<ng-http-loader
  *ngIf="loading"
  [backdrop]="true"
  [backgroundColor]="'#0275d8'"
  [debounceDelay]="100"
  [extraDuration]="10000"
  [minDuration]="300"
  [opacity]="'0.6'"
  [spinner]="spinnerStyle.skCubeGrid">
</ng-http-loader>

<!-- <div class="row">
  <div *ngFor="let advert of adverts" class="col-3">
    <div class="card" style="width: 16rem;">
      <div class="card-body">

        <div *ngIf="advert.advertStatus === 'LIVE'"
          class="alert alert-success"
          role="alert">
          <h4 class="text-center">Status: {{advert.advertStatus}}</h4>
        </div>

        <div *ngIf="advert.advertStatus === 'HIDDEN'"
          class="alert alert-danger"
          role="alert">
          <h4 class="text-center">Status: {{advert.advertStatus}}</h4>
        </div>

        <h5 class="card-title">{{advert.headline}}</h5>
        <p class="card-text">{{advert.details}}</p>
      </div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">Province: {{advert.province}}</li>
        <li class="list-group-item">City: {{advert.city}}</li>
        <li class="list-group-item">Price: R{{advert.price}}</li>
      </ul>

      <div class="card-body">
        <div>
          <button
            *ngIf="advert.id === selectedAdvert"
            type="button"
            class="btn btn-primary"
            (click)="showActions(0)"
            [disabled]="disableAction">
            Cancel
          </button>

          <button
            *ngIf="advert.id !== selectedAdvert"
            type="button"
            class="btn btn-primary"
            (click)="showActions(advert.id)"
            [disabled]="disableAction">
            Actions
          </button>
        </div>

        <div *ngIf="displayActions && advert.id === selectedAdvert">

          <div *ngIf="!busyDeleting">
            <button
              type="button"
              class="btn btn-primary"
              [routerLink]="['/create-advert', advert.id]"
              [disabled]="disableButtons">
              Edit Advert
            </button>
            <button
              *ngIf="advert.advertStatus === 'LIVE'"
              (click)="hideAdvert(advert.id)"
              type="button"
              class="btn btn-primary"
              [disabled]="disableButtons">
              Hide Advert
            </button>
            <button
              *ngIf="advert.advertStatus === 'HIDDEN'"
              (click)="showAdvert(advert.id)"
              type="button"
              class="btn btn-primary"
              [disabled]="disableButtons">
              Show Advert
            </button>
          </div>

          <button
            *ngIf="!busyDeleting"
            (click)="deleteAdvert()"
            type="button"
            class="btn btn-danger"
            [disabled]="disableButtons">
            Delete Advert
          </button>

          <div *ngIf="busyDeleting"
            class="alert alert-danger"
            role="alert">
            {{dangerMessage}}
            <button
              (click)="deleteConfirmed(advert.id)"
              type="button"
              class="btn btn-danger"
              [disabled]="disableButtons">
              Yes, delete it
            </button>
            <button
              (click)="cancel()"
              type="button"
              class="btn btn-success"
              [disabled]="disableButtons">
              Cancel
            </button>
          </div>

        </div>
      </div>

    </div>
  </div>
</div> -->

<!-- Create/Edit Advert Page (2)

Description
The user will be able to create a new advert or edit an existing advert on this page, IF authenticated.
Page Details

If an existing advert is getting updated, populate all the relevant controls with the current advert
details.

To be able to create a new advert the following information should be captured and submitted to
the API:
- Advert Headline Text: string: required: min 10 chars, max 100 chars.
- Province: select: required: linked to Provinces. Select control is not editable.
- City: select: required: linked to Cities for the selected province. Select
control is not editable.
- Advert Details: string: required: min 10 chars, max 1000 characters.
- Price: number: minimum 10000, max 100000000.

Actions:
- Publish Advert: Change the advert status (see the appendix for more info about statuses) to
LIVE and post/put the advert to the API. On success, redirect to My Adverts List Page. On
failure, display message to user and stay on page.
- Cancel: Redirect to My Adverts List Page.

APPENDICES
APPENDIX A: ADVERT STATES
- HIDE The advert is hidden, only the advert owner can see the advert.
- LIVE The advert is live and can be seen by potential buyers.
- DELETED The owner marked the advert as DELETED. A lot of times you’ll ‘shadow
delete’ data. You don’t really delete it (for a lot of reasons), but from the system’s point of
view the data is deleted. Tricky thing to get right.

APPENDIX B: PROVINCE AND CITY DATA
These values should be returned by the API, NOT hard coded in the front end. That way you can easily
update the data without changing the front-end. In the beginning you’ll hard code it until your API is
up and running, but then I want it in the API -->